apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  name: bookinfo-gateway
spec:
  # The selector matches the ingress gateway pod labels.
  # If you installed Istio using Helm following the standard documentation, this would be "istio=ingress"
  selector:
    istio: ingressgateway # use istio default controller
  servers:
  - port:
      number: 8443
      name: https
      protocol: HTTPS
    tls:
      mode: SIMPLE
      credentialName: demo-secret
    hosts:
    - bookinfo-demo-bookinfo-gateway.apps.ocp7.sbx1.kyndryl.net
---
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: bookinfo
spec:
  hosts:
  - "*"
  gateways:
  - bookinfo-gateway
  http:
  - match:
    - uri:
        exact: /productpage
    - uri:
        prefix: /static
    - uri:
        exact: /login
    - uri:
        exact: /logout
    - uri:
        prefix: /api/v1/products
    route:
    - destination:
        host: productpage
        port:
          number: 9080
---
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURtekNDQW9PZ0F3SUJBZ0lVTzZjQlp1c3lsK2cxMTBkemJiNXV3anNmN2xrd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1hURUxNQWtHQTFVRUJoTUNWVk14RGpBTUJnTlZCQWdNQlZOMFlYUmxNUTB3Q3dZRFZRUUhEQVJEYVhSNQpNUTB3Q3dZRFZRUUtEQVJFWlcxdk1Rc3dDUVlEVlFRTERBSkpWREVUTUJFR0ExVUVBd3dLYVhOMGFXOHRaR1Z0CmJ6QWVGdzB5TlRBNE1qRXdPVFUzTkRaYUZ3MHlOVEE0TWpJd09UVTNORFphTUYweEN6QUpCZ05WQkFZVEFsVlQKTVE0d0RBWURWUVFJREFWVGRHRjBaVEVOTUFzR0ExVUVCd3dFUTJsMGVURU5NQXNHQTFVRUNnd0VSR1Z0YnpFTApNQWtHQTFVRUN3d0NTVlF4RXpBUkJnTlZCQU1NQ21semRHbHZMV1JsYlc4d2dnRWlNQTBHQ1NxR1NJYjNEUUVCCkFRVUFBNElCRHdBd2dnRUtBb0lCQVFDeUFmM2ttb1VKalM0VXp1UlBHOHYyblU5R3gyYTM2UXJUS0lyUHBNeGIKbHorYmc2MjEwbUhKRmFtTWhDcmFCdFVLYy9zSTNFRk9xN05FS2cxcmNyZDBUV2Z4ZzdxTk5qL0xVejAwcTJqbgppeGlla1o3S0NQQnpuMkpML1ljclVlNm1vdVMxT2hGVGxvckZ5Ym9UR3owUVk0cVN0K0pFMUhpZjB2TzRWRUtxCkZIVEY4eXFLSEFOUklSeERZWDlqZWJwZzF4YlRHbG1VdGQ4TURDbnhCdjRoK3FkT2VNQzRqS0pYbnRqTitURy8KNGZqODFZMlg0VmdLTERPbWh1QkpYQlRkVW1vY2lPdHdmT1drbzV5QXZuc1ZLbCtPQmhHaEZhMkhGcjZmUjdsZAovQlpWYTZnd1E4TVhPcFh0bStQOHJkRWhmLzNSUStlOXBMWEFzTm9ELzZSWkFnTUJBQUdqVXpCUk1CMEdBMVVkCkRnUVdCQlFBSjlvYStDVmZsbGJ2SmJTUEcyOU9yK2VRUkRBZkJnTlZIU01FR0RBV2dCUUFKOW9hK0NWZmxsYnYKSmJTUEcyOU9yK2VRUkRBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCRAoxU3ZkbGpqeVVpWURkU0NTY2FjR3JUVVJia0ZaRVdLWlF5NjZmUzBYL3FETzlzazNBTjlBVmtEZ0lwZjZDNnUrCkh2eWF5dkV2ejMrY3RiT0NnMnYzOGNnelZMTTdUK1o5TVZ6azBya2JNa3VJcTN3bkN3OWt0bDN5akp2QlZtT3oKeW8rSGxWU05raExYVk10Vzk5VHdIWVkyRUpjY2t5NTF3VmlZbUJRV2FQUXMrdWIzMUdrTEhmVlV3MmU1UFhiTwp4M0Z1dUY5eEowT2RlUGcvTWNXWlVWcFRvQmZaWEh1V1V3bHJzZUpqZHkwQzVlbjFEUThSMS9hOEx1by9Zbzc1Cm11cW9uKzBmOXdON3dHeG9ONWV3WDB3aWNGcFhEa0pCM2RuMnBhZUpOUHFnaGI1enVVMUtXekY1dGdCYmxQNGkKK2U5MUx4SzFsQkVITVZTeUJNaloKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRQ3lBZjNrbW9VSmpTNFUKenVSUEc4djJuVTlHeDJhMzZRclRLSXJQcE14Ymx6K2JnNjIxMG1ISkZhbU1oQ3JhQnRVS2Mvc0kzRUZPcTdORQpLZzFyY3JkMFRXZnhnN3FOTmovTFV6MDBxMmpuaXhpZWtaN0tDUEJ6bjJKTC9ZY3JVZTZtb3VTMU9oRlRsb3JGCnlib1RHejBRWTRxU3QrSkUxSGlmMHZPNFZFS3FGSFRGOHlxS0hBTlJJUnhEWVg5amVicGcxeGJUR2xtVXRkOE0KRENueEJ2NGgrcWRPZU1DNGpLSlhudGpOK1RHLzRmajgxWTJYNFZnS0xET21odUJKWEJUZFVtb2NpT3R3Zk9XawpvNXlBdm5zVktsK09CaEdoRmEySEZyNmZSN2xkL0JaVmE2Z3dROE1YT3BYdG0rUDhyZEVoZi8zUlErZTlwTFhBCnNOb0QvNlJaQWdNQkFBRUNnZ0VBQSsvaVZ5K0p1THZjSkk2czR3a0kybFFCWUYzaHFqaW55aUxQNnliSWRGQWsKa29KM2tabHRHejcwNkl3MXpHdXhRNUZzSUhhS3BUeEw4enFBNEhzQmpydDFqSlJ1eUZmR1VtOXRYNkJZNmlJYgo4Y25qdXJFMjdEKytzMUtRcmtjYUlhcGhwNVo0c3FJV1FLaWxDbTRrVEJ2L2dSNDdEVzJybTFGVm5hS1RkT0tFCmZwU2JvTHkrYnlES2UzRWd5NWFuZ1lCdlBodUFCblJEcTVSbmpENFdzS3R4RE5VUk1LWCtQMXVyaWEzZnBUUW0KcWxySU1BN2RyT1haTmhEQnBFZXZ3OWNPdkRsa3BHUFAzOU5hQ29NM1Y4WUVQUTZxaG1mYVNWdFdwNko5RjlTUQpueEtNTnFHM2pFcHZsVi9wWGhvWUVhNTVBSGtxdnFwaDJ2K1BxWEZid1FLQmdRRGFvVXNiUWx0WVFTbzNoaUVGCmt1bTduVHQ5Zzh2NHdmY0xua3pWK1NrVTNkU01aWUh5a2IwUzNDRmRVOGNOaHpiWEtSYnR6elhSTEdGTDduRkcKNFY0bE04ZzA4SnpqWHczanozRHl1S1NqUlZhbndjelFKMzVRaWl5dkNFYXZTWWNJRm10YTV6cnMzaHg3QlRMcQpZcUhHTHBFN0RLWG1vdnZOYkE4b3k3aUFVUUtCZ1FEUWJ5cysvamRTVms0SVNSd05QM3Z1MTJZaFllVmJ6RDkzCldrNkp6eUl2RWlUckZvSnA0c2hXZG5pazFOQlVQeEFBUlEwSVhlWHh3anlmMmxwYWIvaEcwTjRWM0lNUEZTYU0Kb0VNek5kSDh1Y1o0U3Q4ck5ZZFlpUjlsVnd1QjhZeGdoZmczTFZHUnlNdDQvTTlIZkV0cW45UThqVTdCU2NyOQpkUGRvenRZcGlRS0JnQnlXQkZUL0d5UngrTXdqdklPWER2cVo5MkpVN2tHTFV2cnc2c2o3ZUJTallKd3UxWXZhCjVHYm40M0RwZUZoYmVwOHRYek1lNmNGODFRZnhtRndWTVpNWnJ5N0UyeTZiaWh4a1RqZGVUeUNOKzJPWjRtYkIKRXpJQ3J3Ny92UVpFVGVTUDBkK2o1ajk4VnlyNnBncWhkTmVOMVMxc1hQRElGTFpxVDUwYzdmWFJBb0dCQUlROAo4NWY4bTBhZXdOVWE1VFEyZ2I5dll6bHNyYUpHL0VFUngyQkJUUFBHTkN2K1ZQRXUwMkdmdWowQlU4Y1BWMnlFCllwZGJVMmJGajhidk5vSElKaUZ2cEdjRVJ4WUxtakNBQVFKOWMrTStUZi9GcUw3Mk1BOW90OFdJcXlGZkNXdTMKczFuMlk1ajFacm8wMHFFTTU2QVhGUVR4dGZTRmg4YTBMYitOOG12WkFvR0JBSkM4QnlIVkY4cytFcm5DVDN2aQowRzRIdWZNcHBMRTBqVzlIeFhHdWpRcE9tSjRvWVJ0N1E3MnU2QUFKaG1CTU1ScWxwTlRLYXRjYjNYWjNiamJlCksycVFjT2tVdC9OOUwrU0g2WEdHVmUzd1ZEMGZOQStFYWhXZVF3eC9LTm5vZ2x3U0Jyd0lFbDkwSDAxR29MNkYKcHZHdUlQVC8wSmhWa1ltODU0UlZhREdsCi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
kind: Secret
metadata:
  name: demo-secret
  namespace: istio-system
type: kubernetes.io/tls
